<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<link type="text/css" rel="stylesheet" href="Example.css">

<title>GWT Example</title>

<!-- Load itemscript -->
<script type="text/javascript" language="javascript"
	src="itemscript/itemscript.nocache.js"></script>

<!-- Dependencies -->
<script src="http://yui.yahooapis.com/2.8.0r4/build/yahoo/yahoo-min.js"></script>

<!-- Source file -->
<script src="http://yui.yahooapis.com/2.8.0r4/build/json/json-min.js"></script>
</head>

<body>
<noscript>
<div
	style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
Your web browser must have JavaScript enabled in order for this
application to display correctly.</div>
</noscript>

<script>
function jsonString(object) {
    return YAHOO.lang.JSON.stringify(object);
}
var trace = false;
function toggleTrace() {
    trace = !trace;
    itemscript.setTrace(trace);
}
function testDb() {
    var url = itemscript.put("/foo?b64id", {
        "value":{
            "test-string" : "value",
            "test-int" : 1,
            "test-float" : 1.5,
            "test-boolean" : true,
            "test-null" : null,
            "test-object" : {
                "x" : "y"
            },
            "test-array" : [
                "abc",
                1,
                false
            ]
        }
    })["url"];
    window.alert("get url: " + url + " value: " + jsonString(itemscript.get(url)));
    itemscript.remove(url);
    window.alert("get url: " + url + " value: " + jsonString(itemscript.get(url)));
}
function testAsync() {
    var url = "http://127.0.0.1:8888/test.json"
    var callback =  {
            "onSuccess" : function(value) {
                window.alert("getAsync url: " + url + " value: " + jsonString(value));
            },
            "onError" : function(exception) {
                window.alert("error: " + jsonString(exception));
            }
        };
    itemscript.getAsync(url, callback);
}
</script>
<input type="button" onClick="toggleTrace()" value="Toggle trace" />
<input type="button" onClick="testDb()" value="Test DB" />
<input type="button" onClick="testAsync()" value="Test Async" />
</body>
</html>